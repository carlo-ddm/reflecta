<section class="page">
  <header class="page__header">
    <h1 class="page__title">Impostazioni</h1>
    <p class="page__subtitle">Gestisci la configurazione locale dell'app.</p>
  </header>

  <div class="page__body">
    <mat-card class="settings-card">
      <mat-card-header>
        <mat-card-title>Configurazione locale</mat-card-title>
        <mat-card-subtitle>Author ID salvato nel browser.</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <mat-form-field appearance="outline" class="settings__field">
          <mat-label>Author ID</mat-label>
          <input
            matInput
            id="author-id"
            name="author-id"
            [type]="authorIdInputType"
            autocomplete="off"
            spellcheck="false"
            [formControl]="authorIdControl"
            placeholder="01..."
          />
          <button
            mat-icon-button
            matSuffix
            type="button"
            (click)="toggleAuthorIdVisibility()"
            [attr.aria-pressed]="authorIdVisible()"
            [attr.aria-label]="authorIdVisible() ? 'Nascondi Author ID' : 'Mostra Author ID'"
          >
            <svg class="settings__icon" viewBox="0 0 24 24" aria-hidden="true">
              <path
                d="M12 5c-5 0-9.27 3.11-11 7 1.73 3.89 6 7 11 7s9.27-3.11 11-7c-1.73-3.89-6-7-11-7zm0 11a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"
                fill="currentColor"
              />
            </svg>
          </button>
          @if (!isAuthorIdEmpty && !isAuthorIdValid) {
          <mat-error>L'Author ID deve essere un ULID valido (26 caratteri).</mat-error>
          }
        </mat-form-field>

        <div class="settings__actions">
          <button
            mat-tonal-button
            color="primary"
            type="button"
            (click)="saveAuthorId()"
            [disabled]="!canSaveAuthorId"
          >
            Salva
          </button>
          <button
            mat-button
            color="warn"
            type="button"
            (click)="openRemoveConfirm()"
            [disabled]="!canRemoveAuthorId"
          >
            Rimuovi
          </button>
        </div>

        <p class="settings__hint">
          Se non lo hai, esegui <code>npm -C apps/api run db:seed</code> e copia l'ID.
        </p>
      </mat-card-content>
    </mat-card>
  </div>
</section>
